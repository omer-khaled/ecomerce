import{d as m,j as t,f as n,r as l,a as y}from"./index-99225c5a.js";import k from"./Loading-b14edf56.js";import{Q as d,k as C}from"./react-toastify.esm-9b2d9dc9.js";import{u as N}from"./useDispatch-38e48ee3.js";import{S as b}from"./sweetalert2.all-7a2e22d8.js";/* empty css                      */import{g as v}from"./gards-40b5e5be.js";function w(){const a=m(e=>e.cart.cart),r=N();return t.jsx("section",{className:"col-12 mt-4 col-md-8 mb-2 mb-md-0",children:a?a.length>0?t.jsx(t.Fragment,{children:a.map(e=>{var o,s,u,p,h,x,f,g,j;return t.jsx("div",{className:"card mb-3",children:t.jsxs("div",{className:"row g-0",children:[t.jsx("div",{className:"col-md-4 d-flex justify-content-center p-1",children:t.jsx("img",{style:{maxHeight:"250px",objectFit:"contain",objectPosition:"top"},src:"https://ecomerce-kmcp.onrender.com/images/"+((o=e==null?void 0:e.product)==null?void 0:o.imageUrl),className:"img-fluid rounded-start",alt:(s=e==null?void 0:e.product)==null?void 0:s.title})}),t.jsxs("div",{className:"col-md-8",children:[t.jsxs("div",{className:"card-body",children:[t.jsx("h5",{className:"card-title text-capitalize",children:(u=e==null?void 0:e.product)==null?void 0:u.title}),t.jsx("p",{className:"card-text text-capitalize",children:(p=e==null?void 0:e.product)==null?void 0:p.description}),t.jsx("nav",{className:"mt-3 d-flex justify-content-center fit-content","aria-label":"Page navigation example",children:t.jsxs("ul",{className:"pagination",children:[t.jsx("li",{className:"page-item",children:t.jsxs("button",{className:"page-link",onClick:()=>{var c;r(n.decreaseFromCart((c=e==null?void 0:e.product)==null?void 0:c._id)).then(()=>{var i;d.success(`quatity of ${(i=e==null?void 0:e.product)==null?void 0:i.title} decreased successfully`,{position:"bottom-left",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})})},children:[" ",t.jsx("span",{"aria-hidden":"true",children:"-"})]})}),t.jsx("li",{className:"page-item",children:t.jsx("button",{className:"page-link",children:e==null?void 0:e.qty})}),t.jsx("li",{className:"page-item",children:t.jsx("button",{className:"page-link",onClick:()=>{var c;r(n.addToCart((c=e==null?void 0:e.product)==null?void 0:c._id)).then(()=>{var i;d.success(`quatity of ${(i=e==null?void 0:e.product)==null?void 0:i.title} increased successfully`,{position:"bottom-left",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})})},children:t.jsx("span",{"aria-hidden":"true",children:"+"})})})]})}),t.jsxs("div",{className:"d-flex justify-content-start align-content-center",children:[t.jsxs("span",{className:"rounded border-1 bg-primary text-dark p-2 letterSpaceing me-2",children:[" ",(x=(h=e==null?void 0:e.product)==null?void 0:h.category)==null?void 0:x.name]}),t.jsxs("span",{className:"rounded border-1 bg-primary text-dark p-2 letterSpaceing",children:[" ",(g=(f=e==null?void 0:e.product)==null?void 0:f.company)==null?void 0:g.name]})]})]}),t.jsx("div",{className:"card-footer",children:t.jsx("button",{className:"w-100 btn btn-danger d-block",onClick:()=>{var c;r(n.removeFromCart((c=e==null?void 0:e.product)==null?void 0:c._id)).then(()=>{var i;d.success(`${(i=e==null?void 0:e.product)==null?void 0:i.title} removed successfully`,{position:"bottom-left",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})})},children:"remove from Cart"})})]})]})},(j=e==null?void 0:e.product)==null?void 0:j._id)})}):t.jsx("p",{className:"w-100 fs-5 text-center text-primary",children:"No Products For Now"}):t.jsx("div",{className:"w-100",children:t.jsx(k,{classNamePropert:""})})})}function P(){const a=m(s=>s.cart.totalPrice),[r,e]=l.useState(!1),o=l.useCallback(async()=>{try{const{data:s}=await y.get("https://ecomerce-kmcp.onrender.com/cart/checkout?cancel_url=https://omer-khaled.github.io/ecomerce/failedPage&success_url=https://omer-khaled.github.io/ecomerce/successPage",{headers:{"Content-Type":"application/json"},withCredentials:!0});s.url?(e(!1),b.fire({title:"Payment Ready For You",text:"Go To Payment",icon:"success"}).then(()=>{s.url&&(location.href=s.url)})):(e(!1),b.fire({title:"Cart is Empaty!",text:s.message,icon:"error"}))}catch{window.location.href="https://omer-khaled.github.io/ecomerce/failedPage"}},[]);return t.jsx("section",{className:"col-12 col-md-3 mt-4",children:t.jsxs("div",{className:"d-flex justify-content-start align-center flex-column border border-2 p-2 rounded",children:[t.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[t.jsx("span",{className:"text-capitalize",children:"subTotal"}),t.jsxs("span",{children:[a,"$"]})]}),t.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[t.jsx("span",{className:"text-capitalize",children:"shipping"}),t.jsx("span",{children:"20$"})]}),t.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[t.jsx("span",{className:"text-capitalize",children:"total"}),t.jsxs("span",{children:[a+20,"$"]})]}),t.jsx("button",{className:"btn btn-primary mt-1 text-capitalize",onClick:()=>{e(!0),o()},children:r?t.jsx("div",{className:"mx-auto checkoutLoader rounded-circle border-2"}):"checkout"})]})})}function O(){const a=N(),r=m(e=>e.auth.auth);return l.useEffect(()=>{r&&a(n.getCart())},[a,r]),t.jsxs(t.Fragment,{children:[t.jsxs("section",{className:"row flex-grow-1 m-0 p-1 box flex-column flex-md-row",children:[t.jsx(w,{}),t.jsx(P,{})]}),t.jsx(C,{position:"bottom-left",autoClose:500,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"})]})}const B=v(O);export{O as Cart,B as default};
