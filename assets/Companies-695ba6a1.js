import{r as a,d as C,a as h,j as e,L as j}from"./index-6ccf5ef2.js";import{S as l}from"./sweetalert2.all-343df95c.js";import w from"./Loading-b518a789.js";import{a as k}from"./adminGards-74f9f439.js";import"./Login-f8ff68a0.js";import"./formik.esm-72f64b73.js";import"./modal-590cce2f.js";import"./useDispatch-d7ac4d36.js";function v(){const[r,d]=a.useState(null),[i,u]=a.useState(1),[p,g]=a.useState(null),[f,b]=a.useState(!0),x=C(s=>s.auth.auth),[c,N]=a.useState(""),y=a.useCallback(s=>{l.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(async n=>{if(n.isConfirmed){const{data:m}=await h.delete(`https://ecomerce-kmcp.onrender.com/company/deleteCompany/${s}`,{withCredentials:!0});m.status&&(b(t=>!t),l.fire("Deleted!","Your file has been deleted.","success"))}})},[]),o=a.useCallback(async(s,n,m)=>{try{d(()=>null);const{data:t}=await h.get(`https://ecomerce-kmcp.onrender.com/company/getCompanysPagination?page=${m}${s?`&name=${s}`:""}`);t.companies&&Number.isInteger(t.numberOfPage)&&n&&(d(t.companies),g(t.numberOfPage))}catch(t){l.fire({title:"error through retrived Data",text:t.message,icon:"error"})}},[]);return a.useEffect(()=>{let s=!0,n=null;return(async()=>x&&(c?n=setTimeout(()=>{(async()=>await o(c,s,i))()},700):(async()=>await o(null,s,i))()))(),()=>{n&&clearTimeout(n),s=!1}},[c,f,i,x,o]),e.jsx(e.Fragment,{children:e.jsxs("section",{className:"row w-100 m-0 flex-grow-1 align-items-start my-4 ",children:[e.jsxs("div",{className:" d-flex justify-content-between align-items-center mb-3",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"input-group ",children:[e.jsx("span",{className:"input-group-text",id:"inputGroup-sizing-sm",children:"Name"}),e.jsx("input",{onChange:s=>{N(s.target.value)},type:"text",className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-sm"})]})}),e.jsxs(j,{to:"/ecomerce/admin/companies/addCompany",className:" btn btn-primary d-flex justify-content-center",children:[e.jsx("i",{className:"bi bi-plus-square-fill me-2"}),"Add"]})]}),r?r.length!==0?e.jsxs(e.Fragment,{children:[p&&e.jsx("nav",{className:"mt-1 d-flex justify-content-center","aria-label":"Page navigation example",children:e.jsxs("ul",{className:"pagination me-auto",children:[i>1&&e.jsx("li",{className:"page-item",children:e.jsxs("button",{className:"page-link",onClick:()=>{u(s=>s-1)},children:[" ",e.jsx("span",{"aria-hidden":"true",children:"«"})]})}),e.jsx("li",{className:"page-item",children:e.jsx("button",{className:"page-link",children:i})}),i<p&&e.jsx("li",{className:"page-item",children:e.jsx("button",{className:"page-link",onClick:()=>{u(s=>s+1)},children:e.jsx("span",{"aria-hidden":"true",children:"»"})})})]})}),e.jsx("div",{className:"table-responsive ",children:e.jsxs("table",{className:"table table-bordered align-middle",border:1,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"actions"}),e.jsx("th",{children:"categoryID"}),e.jsx("th",{children:"image"}),e.jsx("th",{children:"name"})]})}),e.jsx("tbody",{children:r==null?void 0:r.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{className:"d-flex justify-content-center align-items-center",children:[e.jsx(j,{to:`/ecomerce/admin/companies/updateCompany/${s==null?void 0:s._id}`,className:"p-0",children:e.jsx("span",{className:"bi bi-pencil-square text-success me-2"})}),e.jsx("button",{className:"p-0",onClick:()=>{y(s==null?void 0:s._id)},children:e.jsx("span",{className:"bi bi-trash-fill text-danger"})})]})}),e.jsx("td",{className:"text-truncate",children:s==null?void 0:s._id}),e.jsx("td",{children:e.jsx("img",{className:"img-fluid",src:"https://ecomerce-kmcp.onrender.com/images/"+(s==null?void 0:s.image),alt:s==null?void 0:s.name})}),e.jsx("td",{className:"text-truncate",children:s==null?void 0:s.name})]},s==null?void 0:s._id))})]})})]}):e.jsx("h1",{className:"text-center w-100 text-primary text-capitalize",children:"no companies for now"}):e.jsx(w,{classNamePropert:""})]})})}const _=k(v);export{v as Companies,_ as default};
