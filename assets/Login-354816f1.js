import{u as N,j as s,L as y,a as n,e as $}from"./index-594e7971.js";import{c as B,a as g,u as C}from"./formik.esm-37746929.js";import{m as x}from"./modal-55d24c64.js";import{u as L}from"./useDispatch-a835cea6.js";import"./sweetalert2.all-ad33f0f6.js";function T({admin:b}){var r,i,o,d,l,c;const w=L(),j=N(),v=B({email:g().email("invalid email").required("email should be required").matches(/^[\w\W]+@gmail\.com$/,"invalid email"),password:g().required("password should be required").matches(/^(?=.*\d)(?=.*[a-zA-Z])(?=.*\W)[\w\W]{8,}$/,"invalid password should at least 8 chareacter and one number , one charater one special")}),a=C({initialValues:{email:null,password:null},validationSchema:v,onSubmit:async t=>{var u,m,p,h;try{const e=await n.post(`https://ecomerce-kmcp.onrender.com/auth/${b?"Adminlogin":"login"}`,t,{withCredentials:!0});n.defaults.headers.common.Authorization=`Bearer ${e.data.accessToken}`,n.defaults.headers.common["Content-Type"]="application/json",w($.login({token:`Bearer ${e.data.accessToken}`,user:e.data.user._id})),x(e.data.status,"Login",e.data.message).then(()=>{e.data.status&&j("/ecomerce/shop",{replace:!0})})}catch(e){e&&x((m=(u=e==null?void 0:e.response)==null?void 0:u.data)==null?void 0:m.status,"Login",(h=(p=e==null?void 0:e.response)==null?void 0:p.data)==null?void 0:h.message)}}});return s.jsx("section",{className:"row w-100 m-0 flex-grow-1 my-4 justify-content-center align-items-start p-3",children:s.jsxs("form",{onSubmit:t=>{t.preventDefault(),a.handleSubmit()},children:[s.jsxs("div",{className:"input-group mb-3",children:[s.jsx("span",{className:"input-group-text",id:"basic-addon1",children:"Email"}),s.jsx("input",{type:"email",className:"form-control",name:"email",id:"exampleInputEmail1","aria-describedby":"emailHelp",onChange:a==null?void 0:a.handleChange,onBlur:a==null?void 0:a.handleBlur}),s.jsx("div",{className:"invalid-feedback",children:((r=a==null?void 0:a.touched)==null?void 0:r.email)&&((i=a==null?void 0:a.errors)==null?void 0:i.email)&&((o=a==null?void 0:a.errors)==null?void 0:o.email)})]}),s.jsxs("div",{className:"input-group mb-3",children:[s.jsx("span",{className:"input-group-text",id:"basic-addon1",children:"Password"}),s.jsx("input",{type:"password",className:"form-control",name:"password",id:"exampleInputPassword1",onChange:a==null?void 0:a.handleChange,onBlur:a==null?void 0:a.handleBlur}),s.jsx("div",{className:"invalid-feedback",children:((d=a==null?void 0:a.touched)==null?void 0:d.password)&&((l=a==null?void 0:a.errors)==null?void 0:l.password)&&((c=a==null?void 0:a.errors)==null?void 0:c.password)})]}),s.jsx(y,{to:"/ecomerce/resetPassword",className:"m-0 p-0 my-1 fs-6 d-block text-center",children:"forget password"}),s.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})})}export{T as default};
