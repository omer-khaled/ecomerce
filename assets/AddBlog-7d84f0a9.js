import{r as n,u as C,d as B,j as e,a as F}from"./index-99225c5a.js";import{c as I,a as f,u as k}from"./formik.esm-61ab1a81.js";import{m as b}from"./modal-ce0b874b.js";import{R as v,m as q,f as R}from"./quill.snow-9772a8c5.js";import{S as A}from"./sweetalert2.all-7a2e22d8.js";function U(){const[u,p]=n.useState(),[o,g]=n.useState(),[m,c]=n.useState(null),j=C(),y=B(t=>t.auth.auth),[d,N]=n.useState(""),w=I({title:f().required("required Feild").matches(/\w{3,}/,"should has at least 3 character"),sumary:f().required("required Feild").matches(/\w{3,}/,"should has at least 3 character")}),s=k({initialValues:{title:"",sumary:""},validationSchema:w,onSubmit:async t=>{var r,i,l,h;if(y)try{const a=new FormData;if(!o)return c("required feild");t.title&&t.sumary&&d&&o&&(a.append("title",t==null?void 0:t.title),a.append("sumary",t==null?void 0:t.sumary),a.append("content",d),a.append("image",o));const S="blog/addBlog",x=await F.post(`https://ecomerce-kmcp.onrender.com/${S}`,a,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}});b(x.data.status,"Adding Blog",x.data.message).then(()=>{j("/ecomerce/admin/blogs")})}catch(a){a&&b((i=(r=a==null?void 0:a.response)==null?void 0:r.data)==null?void 0:i.status,"Adding Blog",(h=(l=a==null?void 0:a.response)==null?void 0:l.data)==null?void 0:h.message)}else A.fire({title:"shuold be login first",icon:"error"})}});return e.jsx("div",{className:"min-100hv p-2 rounded-2 bg-primary d-flex justify-content-start align-items-center flex-column",children:e.jsxs("form",{onSubmit:t=>{t.preventDefault(),s.handleSubmit()},className:"bg-light rounded p-4 w-100 h-100 d-flex justify-content-start align-items-center flex-column",children:[e.jsx("h1",{className:"text-primary text-start text-capitalize bg-light mb-3",children:"Add Blog"}),e.jsxs("div",{className:"input-group mb-3",children:[e.jsx("label",{htmlFor:"exampleInputTitle",className:"input-group-text",children:"Title"}),e.jsx("input",{type:"text",className:"form-control",name:"title",onChange:s.handleChange,onBlur:s.handleBlur,id:"exampleInputTitle"}),e.jsx("div",{className:"invalid-feedback",children:s.touched.title&&s.errors.title&&s.errors.title})]}),e.jsxs("div",{className:"input-group mb-3",children:[e.jsx("label",{htmlFor:"exampleInputsumary",className:"input-group-text",children:"Sumary"}),e.jsx("input",{type:"text",className:"form-control",name:"sumary",onChange:s.handleChange,onBlur:s.handleBlur,id:"exampleInputsumary"}),e.jsx("div",{className:"invalid-feedback",children:s.touched.sumary&&s.errors.sumary&&s.errors.sumary})]}),e.jsxs("div",{className:"input-group mb-3",children:[e.jsx("label",{htmlFor:"exampleInputimageCategor1",className:"input-group-text",children:"image"}),e.jsx("input",{type:"file",className:"form-control",id:"exampleInputimageCategor1",onChange:t=>{if(t.target.files){const r=t.target.files[0],i=["image/jpeg","image/png","image/jpg"];if(r)if(i.includes(r.type)){const l=URL.createObjectURL(r);g(t.target.files[0]),p(l),c(null)}else p(null),g(null),c("invalid file only png jpg jpeg")}}}),e.jsx("div",{className:"invalid-feedback",children:m&&m})]}),u&&!m&&e.jsx("img",{src:u,style:{width:"150px",height:"150px",display:"block",marginBottom:"10px"},alt:"presonal Image"}),e.jsx("div",{className:"w-100 flex-grow-1 mb-3",children:e.jsx(v,{className:"box",modules:q,formats:R,theme:"snow",value:d,onChange:N})}),e.jsx("button",{type:"submit",className:"btn btn-primary w-100",children:"Submit"})]})})}export{U as default};
