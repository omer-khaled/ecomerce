import{d as m,j as e,f as n,r as l,a as y}from"./index-594e7971.js";import C from"./Loading-fd812f1b.js";import{Q as d,k as v}from"./react-toastify.esm-69beba3b.js";import{u as N}from"./useDispatch-a835cea6.js";import{S as b}from"./sweetalert2.all-ad33f0f6.js";/* empty css                      */import{g as k}from"./gards-b0a551a6.js";function w(){const a=m(t=>t.cart.cart),r=N();return e.jsx("section",{className:"col-12 mt-4 col-md-8 mb-2 mb-md-0",children:a?a.length>0?e.jsx(e.Fragment,{children:a.map(t=>{var o,s,u,p,h,x,f,g,j;return e.jsx("div",{className:"card mb-3",children:e.jsxs("div",{className:"row g-0",children:[e.jsx("div",{className:"col-md-4 d-flex justify-content-center p-1",children:e.jsx("img",{style:{maxHeight:"250px",objectFit:"contain",objectPosition:"top"},src:"https://ecomerce-kmcp.onrender.com/images/"+((o=t==null?void 0:t.product)==null?void 0:o.imageUrl),className:"img-fluid rounded-start",alt:(s=t==null?void 0:t.product)==null?void 0:s.title})}),e.jsxs("div",{className:"col-md-8",children:[e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title text-capitalize",children:(u=t==null?void 0:t.product)==null?void 0:u.title}),e.jsx("p",{className:"card-text text-capitalize",children:(p=t==null?void 0:t.product)==null?void 0:p.description}),e.jsx("nav",{className:"mt-3 d-flex justify-content-center fit-content","aria-label":"Page navigation example",children:e.jsxs("ul",{className:"pagination",children:[e.jsx("li",{className:"page-item",children:e.jsxs("button",{className:"page-link",onClick:()=>{var c;r(n.decreaseFromCart((c=t==null?void 0:t.product)==null?void 0:c._id)).then(()=>{var i;d.success(`quatity of ${(i=t==null?void 0:t.product)==null?void 0:i.title} decreased successfully`,{position:"bottom-left",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})})},children:[" ",e.jsx("span",{"aria-hidden":"true",children:"-"})]})}),e.jsx("li",{className:"page-item",children:e.jsx("button",{className:"page-link",children:t==null?void 0:t.qty})}),e.jsx("li",{className:"page-item",children:e.jsx("button",{className:"page-link",onClick:()=>{var c;r(n.addToCart((c=t==null?void 0:t.product)==null?void 0:c._id)).then(()=>{var i;d.success(`quatity of ${(i=t==null?void 0:t.product)==null?void 0:i.title} increased successfully`,{position:"bottom-left",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})})},children:e.jsx("span",{"aria-hidden":"true",children:"+"})})})]})}),e.jsxs("div",{className:"d-flex justify-content-start align-content-center",children:[e.jsxs("span",{className:"rounded border-1 bg-primary text-dark p-2 letterSpaceing me-2",children:[" ",(x=(h=t==null?void 0:t.product)==null?void 0:h.category)==null?void 0:x.name]}),e.jsxs("span",{className:"rounded border-1 bg-primary text-dark p-2 letterSpaceing",children:[" ",(g=(f=t==null?void 0:t.product)==null?void 0:f.company)==null?void 0:g.name]})]})]}),e.jsx("div",{className:"card-footer",children:e.jsx("button",{className:"w-100 btn btn-danger d-block",onClick:()=>{var c;r(n.removeFromCart((c=t==null?void 0:t.product)==null?void 0:c._id)).then(()=>{var i;d.success(`${(i=t==null?void 0:t.product)==null?void 0:i.title} removed successfully`,{position:"bottom-left",autoClose:500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})})},children:"remove from Cart"})})]})]})},(j=t==null?void 0:t.product)==null?void 0:j._id)})}):e.jsx("p",{className:"w-100 fs-5 text-center text-primary",children:"No Products For Now"}):e.jsx("div",{className:"w-100",children:e.jsx(C,{classNamePropert:""})})})}function P(){const a=m(s=>s.cart.totalPrice),[r,t]=l.useState(!1),o=l.useCallback(async()=>{try{const{data:s}=await y.get("https://ecomerce-kmcp.onrender.com/cart/checkout?cancel_url=http://localhost:5173/failedPage&success_url=http://localhost:5173/successPage",{headers:{"Content-Type":"application/json"},withCredentials:!0});s.url?(t(!1),b.fire({title:"Payment Ready For You",text:"Go To Payment",icon:"success"}).then(()=>{s.url&&(location.href=s.url)})):(t(!1),b.fire({title:"Cart is Empaty!",text:s.message,icon:"error"}))}catch{window.location.href="http://localhost:5173/failedPage"}},[]);return e.jsx("section",{className:"col-12 col-md-3 mt-4",children:e.jsxs("div",{className:"d-flex justify-content-start align-center flex-column border border-2 p-2 rounded",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("span",{className:"text-capitalize",children:"subTotal"}),e.jsxs("span",{children:[a,"$"]})]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("span",{className:"text-capitalize",children:"shipping"}),e.jsx("span",{children:"20$"})]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("span",{className:"text-capitalize",children:"total"}),e.jsxs("span",{children:[a+20,"$"]})]}),e.jsx("button",{className:"btn btn-primary mt-1 text-capitalize",onClick:()=>{t(!0),o()},children:r?e.jsx("div",{className:"mx-auto checkoutLoader rounded-circle border-2"}):"checkout"})]})})}function O(){const a=N(),r=m(t=>t.auth.auth);return l.useEffect(()=>{r&&a(n.getCart())},[a,r]),e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"row flex-grow-1 m-0 p-1 box flex-column flex-md-row",children:[e.jsx(w,{}),e.jsx(P,{})]}),e.jsx(v,{position:"bottom-left",autoClose:500,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"})]})}const B=k(O);export{O as Cart,B as default};
