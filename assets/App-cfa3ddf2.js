import{j as a,d as c,r,a as l,e as o,L as b,N as i,O as x}from"./index-19290a20.js";import{m as g}from"./modal-2d4d4cf4.js";import{u as h}from"./useDispatch-50e21e5b.js";import"./sweetalert2.all-9dcc25ec.js";function j(){return a.jsxs("footer",{className:"bg-light text-center text-white",children:[a.jsx("div",{className:"container p-4 pb-0",children:a.jsxs("section",{className:"mb-4",children:[a.jsx("a",{className:"btn text-white btn-floating m-1",style:{backgroundColor:"#55acee"},href:"#!",role:"button",children:a.jsx("i",{className:"bi bi-twitter"})}),a.jsx("a",{className:"btn text-white btn-floating m-1",style:{backgroundColor:"#dd4b39"},href:"#!",role:"button",children:a.jsx("i",{className:"bi bi-google"})}),a.jsx("a",{className:"btn text-white btn-floating m-1",style:{backgroundColor:"#ac2bac"},href:"#!",role:"button",children:a.jsx("i",{className:"bi bi-instagram"})}),a.jsx("a",{className:"btn text-white btn-floating m-1",style:{backgroundColor:"#0082ca"},href:"#!",role:"button",children:a.jsx("i",{className:"bi bi-linkedin"})}),a.jsx("a",{className:"btn text-white btn-floating m-1",style:{backgroundColor:"#333333"},href:"#!",role:"button",children:a.jsx("i",{className:"bi bi-github"})})]})}),a.jsxs("div",{className:"text-center p-3 text-primary",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},children:["Â© 2023 Copyright :",a.jsx("a",{className:"text-white",href:"https://omer-khaled.github.io/OmerKhaled/",children:" omer khaled"})]})]})}function p(){const s=c(e=>e.auth.auth),n=c(e=>e.auth.user),t=h(),[d,m]=r.useState(null),u=r.useCallback(async()=>{try{const{data:e}=await l.get("http://localhost:3002/auth/logout",{withCredentials:!0});e.status&&t(o.logout())}catch(e){console.log(e.message)}},[t]);return r.useEffect(()=>{(async()=>{try{if(s&&n){const{data:e}=await l.get(`http://localhost:3002/auth/getuser/${n}`,{withCredentials:!0});e.status&&e.user&&m(e.user)}}catch{g(!1,"retrived user Data failed","click here")}})()},[s,n]),a.jsx("nav",{className:"navbar navbar-expand-lg navbar-light bg-light rounded",children:a.jsxs("div",{className:"container-fluid",children:[a.jsxs(b,{to:"/ecomerce/",className:"navbar-brand",children:[a.jsx("span",{className:"fs-2 text-primary",children:"B"}),"uy"]}),a.jsx("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:a.jsx("span",{className:"navbar-toggler-icon"})}),a.jsx("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:a.jsxs("ul",{className:"navbar-nav ms-auto mb-2 mb-lg-0 d-flex justify-content-center align-items-center",children:[a.jsx("li",{className:"nav-item",children:a.jsxs(i,{className:({isActive:e})=>e?"nav-link active":"nav-link","aria-current":"page",to:"/ecomerce/",children:[a.jsx("i",{className:"bi bi-house-fill"})," Home"]})}),a.jsx("li",{className:"nav-item",children:a.jsxs(i,{className:({isActive:e})=>e?"nav-link active":"nav-link","aria-current":"page",to:"shop",children:[a.jsx("i",{className:"bi bi-shop"})," Shop"]})}),a.jsx("li",{className:"nav-item",children:a.jsxs(i,{className:({isActive:e})=>e?"nav-link active":"nav-link","aria-current":"page",to:"blog",children:[a.jsx("i",{className:"bi bi-substack"})," Blog"]})}),s?a.jsxs(a.Fragment,{children:[a.jsx("li",{className:"nav-item",children:a.jsxs(i,{className:({isActive:e})=>e?"nav-link active":"nav-link","aria-current":"page",to:"cart",children:[a.jsx("i",{className:"bi bi-cart-fill"})," cart"]})}),a.jsx("li",{className:"nav-item",children:a.jsxs(i,{className:({isActive:e})=>e?"nav-link active":"nav-link","aria-current":"page",to:"orders",children:[a.jsx("i",{className:"bi bi-cart-fill"})," orders"]})}),a.jsx("li",{className:"nav-item",children:a.jsxs("button",{className:"nav-link","aria-current":"page",onClick:()=>{u()},children:[a.jsx("i",{className:"bi bi-door-open-fill text-danger"})," logout"]})}),a.jsx("li",{className:"nav-item",children:d&&a.jsx("div",{className:"",children:a.jsx("img",{className:"rounded-circle ",style:{width:"50px",height:"50px",objectFit:"cover",objectPosition:"top center"},src:"http://localhost:3002/images/"+d.image,alt:""})})})]}):a.jsxs(a.Fragment,{children:[a.jsx("li",{className:"nav-item",children:a.jsxs(i,{className:({isActive:e})=>e?"nav-link active":"nav-link","aria-current":"page",to:"signup",children:[a.jsx("i",{className:"bi bi-door-closed-fill"})," Sign up"]})}),a.jsx("li",{className:"nav-item",children:a.jsxs(i,{className:({isActive:e})=>e?"nav-link active":"nav-link","aria-current":"page",to:"login",children:[a.jsx("i",{className:"bi bi-door-open-fill"})," Login"]})})]})]})})]})})}function y(){const s=h(),n=c(t=>t.auth.auth);return r.useEffect(()=>{(async()=>{try{if(n===!1){const t=await l.get("http://localhost:3002/auth/refresh",{withCredentials:!0});t.data.status&&(l.defaults.headers.common.Authorization=`Bearer ${t.data.accessToken}`,l.defaults.headers.common["Content-Type"]="application/json",s(o.login({token:t.data.accessToken,user:t.data.user})))}}catch{s(o.logout())}})()},[s,n]),a.jsxs("main",{className:"container d-flex flex-column min-100vh",children:[a.jsx(p,{}),a.jsx(x,{}),a.jsx(j,{})]})}export{y as default};
