import{r as d,u as C,d as S,j as e,a as w}from"./index-594e7971.js";import{c as k,a as v,u as F}from"./formik.esm-37746929.js";import{m as y}from"./modal-55d24c64.js";import{S as I}from"./sweetalert2.all-ad33f0f6.js";function D({name:i}){const[p,u]=d.useState(),[l,g]=d.useState(),[m,c]=d.useState(null),h=C(),j=S(a=>a.auth.auth),N=k({name:v().required("required Feild").matches(/\w{3,}/,"should has at least 3 character")}),r=F({initialValues:{name:null},validationSchema:N,onSubmit:async a=>{var s,n,o,f;if(j)try{const t=new FormData;if(!l)return c("required feild");a.name&&l&&(t.append("name",a==null?void 0:a.name),t.append("image",l));let x="category/addCategory";i!=="category"&&(x="company/addCompany");const b=await w.post(`https://ecomerce-kmcp.onrender.com/${x}`,t,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}});y(b.data.status,"Adding"+i,b.data.message).then(()=>{h(i==="category"?"/ecomerce/admin/categories":"/ecomerce/admin/companies")})}catch(t){t&&y((n=(s=t==null?void 0:t.response)==null?void 0:s.data)==null?void 0:n.status,"Adding Category",(f=(o=t==null?void 0:t.response)==null?void 0:o.data)==null?void 0:f.message)}else I.fire({title:"shuold be login first",icon:"error"})}});return e.jsx("div",{className:"p-4 rounded-2 position-absolute top-0 start-0 bottom-0 end-0 bg-primary d-flex justify-content-center align-items-center flex-column",children:e.jsxs("form",{onSubmit:a=>{a.preventDefault(),r.handleSubmit()},className:"bg-light p-4 w-50",children:[e.jsxs("h1",{className:"text-primary text-start text-capitalize bg-light mb-3",children:["Add ",i]}),e.jsxs("div",{className:"input-group mb-3",children:[e.jsx("label",{htmlFor:"exampleInputNameCategor1",className:"input-group-text",children:"Name"}),e.jsx("input",{type:"text",className:"form-control",name:"name",onChange:r.handleChange,onBlur:r.handleBlur,id:"exampleInputNameCategor1"}),e.jsx("div",{className:"invalid-feedback",children:r.touched.name&&r.errors.name&&r.errors.name})]}),e.jsxs("div",{className:"input-group mb-3",children:[e.jsx("label",{htmlFor:"exampleInputimageCategor1",className:"input-group-text",children:"image"}),e.jsx("input",{type:"file",className:"form-control",id:"exampleInputimageCategor1",onChange:a=>{if(a.target.files){const s=a.target.files[0],n=["image/jpeg","image/png","image/jpg"];if(s)if(n.includes(s.type)){const o=URL.createObjectURL(s);g(a.target.files[0]),u(o),c(null)}else u(null),g(null),c("invalid file only png jpg jpeg")}}}),e.jsx("div",{className:"invalid-feedback",children:m&&m})]}),p&&!m&&e.jsx("img",{src:p,style:{width:"150px",height:"150px",display:"block",marginBottom:"10px"},alt:"presonal Image"}),e.jsx("button",{type:"submit",className:"btn btn-primary w-100",children:"Submit"})]})})}export{D as default};
