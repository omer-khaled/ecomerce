import{r,a as j,j as t,L as g}from"./index-10652f01.js";import{S as d}from"./sweetalert2.all-c14fc2e8.js";import w from"./Loading-f99c1e89.js";import{a as P}from"./adminGards-14a97f83.js";import"./Login-b98e6c44.js";import"./formik.esm-2dba3fb2.js";import"./modal-232ec21a.js";import"./useDispatch-fc7e8a64.js";function v(){const[c,m]=r.useState(null),[n,u]=r.useState(1),[x,f]=r.useState(null),[N,b]=r.useState(!0),[o,y]=r.useState(""),k=r.useCallback(e=>{d.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(async a=>{if(a.isConfirmed){const{data:i}=await j.get(`https://ecomerce-kmcp.onrender.com//products/deleteProduct/${e}`,{withCredentials:!0});i.status?(b(s=>!s),d.fire("Deleted!","Your file has been deleted.","success")):d.fire("Deleted failed!",`${i.message}`,"error")}})},[]),l=r.useCallback(async(e,a,i)=>{try{m(()=>null);const{data:s}=await j.get(`https://ecomerce-kmcp.onrender.com//products/getProducts?page=${i}${e?`&title=${e}`:""}`);s.products&&Number.isInteger(s.numberOfPage)&&a&&(m(s.products),f(s.numberOfPage))}catch(s){d.fire({title:"error through retrived Data",text:s.message,icon:"error"})}},[]);return r.useEffect(()=>{let e=!0,a=null;return o?a=setTimeout(()=>{(async()=>await l(o,e,n))()},700):(async()=>await l(null,e,n))(),()=>{a&&clearTimeout(a),e=!1}},[o,N,l,n]),t.jsxs("section",{className:"row w-100 m-0 flex-grow-1 align-items-start my-4 ",children:[t.jsxs("div",{className:" d-flex justify-content-between align-items-center mb-3",children:[t.jsx("div",{className:"col-6",children:t.jsxs("div",{className:"input-group",children:[t.jsx("span",{className:"input-group-text",id:"inputGroup-sizing-sm",children:"Title"}),t.jsx("input",{type:"text",onChange:e=>{y(e.target.value)},className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-sm"})]})}),t.jsxs(g,{to:"addProducts",className:" btn btn-primary d-flex justify-content-center",children:[t.jsx("i",{className:"bi bi-plus-square-fill me-2"}),"Add"]})]}),c?c.length!==0?t.jsx(t.Fragment,{children:t.jsx("div",{className:"table-responsive",children:t.jsxs("table",{className:"table table-bordered align-middle",border:1,children:[t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{children:"actions"}),t.jsx("th",{children:"productId"}),t.jsx("th",{children:"image"}),t.jsx("th",{children:"title"}),t.jsx("th",{children:"description"}),t.jsx("th",{children:"price"}),t.jsx("th",{children:"inStock"}),t.jsx("th",{children:"category"}),t.jsx("th",{children:"company"}),t.jsx("th",{children:"sizes"}),t.jsx("th",{children:"colors"})]})}),t.jsx("tbody",{children:c==null?void 0:c.map(e=>{var a,i,s,h;return t.jsxs("tr",{children:[t.jsx("td",{children:t.jsxs("div",{className:"d-flex justify-content-center align-items-center",children:[t.jsx(g,{to:`editProducts/${e==null?void 0:e._id}`,className:"p-0",children:t.jsx("span",{className:"bi bi-pencil-square text-success me-2"})}),t.jsx("button",{className:"p-0",onClick:()=>{k(e==null?void 0:e._id)},children:t.jsx("span",{className:"bi bi-trash-fill text-danger"})})]})}),t.jsx("td",{className:"text-truncate",children:e==null?void 0:e._id}),t.jsx("td",{children:t.jsx("img",{className:"img-fluid",src:"https://ecomerce-kmcp.onrender.com//images/"+(e==null?void 0:e.imageUrl),alt:e==null?void 0:e.title})}),t.jsx("td",{className:"text-truncate",children:e==null?void 0:e.title}),t.jsx("td",{className:"text-truncate",children:e==null?void 0:e.description}),t.jsx("td",{className:"text-truncate",children:e==null?void 0:e.price}),t.jsxs("td",{className:"text-truncate",children:[e==null?void 0:e.inStock," peices"]}),t.jsx("td",{className:"text-truncate",children:(a=e==null?void 0:e.category)==null?void 0:a.name}),t.jsx("td",{className:"text-truncate",children:(i=e==null?void 0:e.company)==null?void 0:i.name}),t.jsx("td",{className:"text-truncate",children:(s=e==null?void 0:e.sizes)==null?void 0:s.join(",")}),t.jsx("td",{className:"text-truncate",children:t.jsx("div",{className:"w-100 h-100 d-flex justify-content-start align-items-center gap-1",children:(h=e==null?void 0:e.colors)==null?void 0:h.map(p=>t.jsx("span",{className:"d-block rounded-circle",style:{background:p,width:"15px",height:"15px"}},p))})})]},e==null?void 0:e._id)})})]})})}):t.jsx("h1",{className:"text-center w-100 text-primary text-capitalize",children:"no products for now"}):t.jsx(w,{classNamePropert:""}),x&&t.jsx("nav",{className:"mx-auto mt-3 d-flex justify-content-center","aria-label":"Page navigation example",children:t.jsxs("ul",{className:"pagination",children:[n>1&&t.jsx("li",{className:"page-item",children:t.jsxs("button",{className:"page-link",onClick:()=>{u(e=>e-1)},children:[" ",t.jsx("span",{"aria-hidden":"true",children:"«"})]})}),t.jsx("li",{className:"page-item",children:t.jsx("button",{className:"page-link",children:n})}),n<x&&t.jsx("li",{className:"page-item",children:t.jsx("button",{className:"page-link",onClick:()=>{u(e=>e+1)},children:t.jsx("span",{"aria-hidden":"true",children:"»"})})})]})})]})}const O=P(v);export{v as Products,O as default};
