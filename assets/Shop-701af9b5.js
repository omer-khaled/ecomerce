import{d as u,j as e,s as d,r as i}from"./index-10652f01.js";import h from"./Loading-f99c1e89.js";import{C as j}from"./CardProduct-f8070af2.js";import{u as p}from"./useDispatch-fc7e8a64.js";import{k as N}from"./react-toastify.esm-7b674e2a.js";/* empty css                      */function b(){const c=u(s=>s.products.products),t=u(s=>s.auth.auth),r=u(s=>s.products.page),n=u(s=>s.products.numberOfPage),l=p();return e.jsxs("section",{className:"col-md-9  flex-column",children:[e.jsx("section",{className:"w-100 row row-cols-1 row-cols-md-2 row-cols-lg-3 h-100 mx-auto",children:c?c.length===0?e.jsx("p",{className:"w-100 fs-5 text-center text-primary",children:"No Products For Now"}):c.map(s=>e.jsx(j,{order:!1,product:s,auth:t,qty:null},s==null?void 0:s._id)):e.jsx("div",{className:"w-100",children:e.jsx(h,{classNamePropert:""})})}),e.jsx("nav",{className:"mx-auto mt-3 d-flex justify-content-center","aria-label":"Page navigation example",children:e.jsxs("ul",{className:"pagination",children:[r>1&&e.jsx("li",{className:"page-item",children:e.jsxs("button",{className:"page-link",onClick:()=>{l(d.prevPage())},children:[" ",e.jsx("span",{"aria-hidden":"true",children:"«"})]})}),e.jsx("li",{className:"page-item",children:e.jsx("button",{className:"page-link",children:r})}),r<n&&e.jsx("li",{className:"page-item",children:e.jsx("button",{className:"page-link",onClick:()=>{l(d.nextPage())},children:e.jsx("span",{"aria-hidden":"true",children:"»"})})})]})})]})}function x({uri:c,name:t}){const r=p(),[n,l]=i.useState(null),[s,f]=i.useState(null),g=i.useCallback(a=>{f(o=>(o?o.includes(a)?o=o.filter(m=>m!==a):o=[...o,a]:o=[a],o))},[]);return i.useEffect(()=>{let a=!0;return async function(){const m=await(await fetch("https://ecomerce-kmcp.onrender.com/"+c,{method:"GET",headers:{"Content-Type":"application/json"}})).json();a&&l(t==="Categories"?m.categories:m.companies)}(),()=>{a=!1}},[l,c,t]),i.useEffect(()=>{s!==null&&r(t==="Categories"?d.addCategories(s):d.addcompanies(s))},[r,s,t]),e.jsx("div",{className:"accordion w-100 mb-3 p-0",id:"accordionExample",children:e.jsxs("div",{className:"accordion-item",children:[e.jsx("h2",{className:"accordion-header",id:"headingOne",children:e.jsx("button",{className:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#"+t,"aria-expanded":"true","aria-controls":"collapseOne",children:t})}),e.jsx("div",{id:t,className:"accordion-collapse collapse p-1","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample",children:n?n.length!==0?n.map(a=>e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",name:"category",type:"checkbox",value:a==null?void 0:a._id,id:"flexCheckDefault"+(a==null?void 0:a._id),onChange:o=>{g(o.target.value)}}),e.jsx("label",{className:"form-check-label",htmlFor:"flexCheckDefault"+(a==null?void 0:a._id),children:a==null?void 0:a.name})]},a==null?void 0:a._id)):e.jsxs("p",{className:"fs-custom text-center text-primary",children:["no ",t," for now"]}):e.jsx(h,{classNamePropert:""})})]})})}function C(){const c=p(),[t,r]=i.useState(null),[n,l]=i.useState(null);return i.useEffect(()=>{const s=setTimeout(()=>{t!==null&&c(d.addMin(t))},700);return()=>{clearTimeout(s)}},[c,t]),i.useEffect(()=>{const s=setTimeout(()=>{n!==null&&c(d.addMax(n))},700);return()=>{clearTimeout(s)}},[c,n]),e.jsxs("div",{className:"w-100",children:[e.jsxs("div",{className:"input-group mb-3",children:[e.jsx("span",{className:"input-group-text",children:"Min"}),e.jsx("input",{type:"number",className:"form-control",step:"0.01",onChange:s=>{r(Number(s.target.value))}})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("span",{className:"input-group-text",children:"Max"}),e.jsx("input",{type:"number",className:"form-control",step:"0.01",onChange:s=>{console.log(Number(s.target.value)),l(Number(s.target.value))}})]})]})}function v(){return e.jsxs("div",{className:"col-md-3 mb-2 mb-md-0 d-flex justify-content-center align-items-center flex-column m-0 px-1",children:[e.jsx(x,{uri:"/category/getCategories",name:"Categories"}),e.jsx(x,{uri:"/company/getCompany",name:"Companies"}),e.jsx(C,{})]})}function M(){const c=p(),t=u(n=>n.products.filters),r=u(n=>n.products.page);return i.useEffect(()=>{i.startTransition(()=>{c(d.getProducts("/products/filters?"))})},[c,t,r]),e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"row w-100 m-0 flex-grow-1 align-items-start my-4 ",children:[e.jsx(v,{}),e.jsx(b,{})]}),e.jsx(N,{position:"bottom-left",autoClose:500,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"})]})}export{M as default};
