import{r as a,d as w,a as h,j as e,L as g}from"./index-99225c5a.js";import{S as d}from"./sweetalert2.all-7a2e22d8.js";import k from"./Loading-b14edf56.js";import{a as B}from"./adminGards-093ffe52.js";import"./Login-ce269f9f.js";import"./formik.esm-61ab1a81.js";import"./modal-ce0b874b.js";import"./useDispatch-38e48ee3.js";function v(){const[r,m]=a.useState(null),[n,u]=a.useState(1),[x,p]=a.useState(null),[j,b]=a.useState(!0),f=w(t=>t.auth.auth),[c,N]=a.useState(""),l=a.useCallback(async(t,i,o)=>{try{m(()=>null);const{data:s}=await h.get(`https://ecomerce-kmcp.onrender.com/blog/getBlogsPagination?page=${o}${t?`&title=${t}`:""}`);s.blogs&&Number.isInteger(s.numberOfPage)&&i&&(m(s.blogs),p(s.numberOfPage))}catch(s){d.fire({title:"error through retrived Data",text:s.message,icon:"error"})}},[]),y=a.useCallback(t=>{d.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(async i=>{if(i.isConfirmed){const{data:o}=await h.delete(`https://ecomerce-kmcp.onrender.com/blog/deleteBlog/${t}`,{withCredentials:!0});o.status&&(b(s=>!s),d.fire("Deleted!","Your file has been deleted.","success"))}})},[]);return a.useEffect(()=>{let t=!0,i=null;return c?i=setTimeout(()=>{(async()=>await l(c,t,n))()},700):(async()=>await l(null,t,n))(),()=>{i&&clearTimeout(i),t=!1}},[c,j,n,f,l]),e.jsxs("section",{className:"row w-100 m-0 align-items-start my-4",children:[e.jsxs("div",{className:" d-flex justify-content-between align-items-center mb-3",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"input-group",children:[e.jsx("span",{className:"input-group-text",id:"inputGroup-sizing-sm",children:"Title"}),e.jsx("input",{type:"text",onChange:t=>{N(t.target.value)},className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-sm"})]})}),e.jsxs(g,{to:"/ecomerce/admin/blogs/addblog",className:" btn btn-primary d-flex justify-content-center",children:[e.jsx("i",{className:"bi bi-plus-square-fill me-2"}),"Add"]})]}),r?r.length!==0?e.jsxs(e.Fragment,{children:[x&&e.jsx("nav",{className:"mt-3 d-flex justify-content-center","aria-label":"Page navigation example",children:e.jsxs("ul",{className:"pagination me-auto",children:[n>1&&e.jsx("li",{className:"page-item",children:e.jsxs("button",{className:"page-link",onClick:()=>{u(t=>t-1)},children:[" ",e.jsx("span",{"aria-hidden":"true",children:"«"})]})}),e.jsx("li",{className:"page-item",children:e.jsx("button",{className:"page-link",children:n})}),n<x&&e.jsx("li",{className:"page-item",children:e.jsx("button",{className:"page-link",onClick:()=>{u(t=>t+1)},children:e.jsx("span",{"aria-hidden":"true",children:"»"})})})]})}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-bordered align-middle",border:1,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"actions"}),e.jsx("th",{children:"BlogID"}),e.jsx("th",{children:"image"}),e.jsx("th",{children:"title"}),e.jsx("th",{children:"sumary"})]})}),e.jsx("tbody",{children:r==null?void 0:r.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{className:"d-flex justify-content-center align-items-center",children:[e.jsx(g,{to:`/ecomerce/admin/blogs/UpdateBlog/${t==null?void 0:t._id}`,className:"p-0",children:e.jsx("span",{className:"bi bi-pencil-square text-success me-2"})}),e.jsx("button",{className:"p-0",onClick:()=>{y(t==null?void 0:t._id)},children:e.jsx("span",{className:"bi bi-trash-fill text-danger"})})]})}),e.jsx("td",{className:"text-truncate",children:t==null?void 0:t._id}),e.jsx("td",{children:e.jsx("img",{className:"img-fluid",src:"https://ecomerce-kmcp.onrender.com/images/"+(t==null?void 0:t.image),alt:t==null?void 0:t.title})}),e.jsx("td",{className:"text-truncate",children:t==null?void 0:t.title}),e.jsx("td",{className:"text-truncate",children:t==null?void 0:t.sumary})]},t==null?void 0:t._id))})]})})]}):e.jsx("h1",{className:"text-center w-100 text-primary text-capitalize",children:"no blogs for now"}):e.jsx(k,{classNamePropert:""})]})}const O=B(v);export{v as Blog,O as default};
